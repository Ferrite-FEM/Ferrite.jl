<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Export · Ferrite.jl</title><meta name="title" content="Export · Ferrite.jl"/><meta property="og:title" content="Export · Ferrite.jl"/><meta property="twitter:title" content="Export · Ferrite.jl"/><meta name="description" content="Documentation for Ferrite.jl."/><meta property="og:description" content="Documentation for Ferrite.jl."/><meta property="twitter:description" content="Documentation for Ferrite.jl."/><meta property="og:url" content="https://ferrite-fem.github.io/Ferrite.jl/stable/manual/export/"/><meta property="twitter:url" content="https://ferrite-fem.github.io/Ferrite.jl/stable/manual/export/"/><link rel="canonical" href="https://ferrite-fem.github.io/Ferrite.jl/stable/manual/export/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Ferrite.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Ferrite.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs (Ctrl + /)"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../fe_intro/">Introduction to FEM</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../degrees_of_freedom/">Degrees of Freedom</a></li><li><a class="tocitem" href="../assembly/">Assembly</a></li><li><a class="tocitem" href="../boundary_conditions/">Initial and Boundary Conditions</a></li><li><a class="tocitem" href="../constraints/">Constraints</a></li><li><a class="tocitem" href="../grid/">Grid</a></li><li class="is-active"><a class="tocitem" href>Export</a><ul class="internal"><li><a class="tocitem" href="#Exporting-with-DofHandler"><span>Exporting with <code>DofHandler</code></span></a></li><li><a class="tocitem" href="#Exporting-Boundary-Conditions"><span>Exporting Boundary Conditions</span></a></li></ul></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../overview/">Documentation of examples</a></li><li><a class="tocitem" href="../../examples/heat_equation/">Heat Equation</a></li><li><a class="tocitem" href="../../examples/postprocessing/">Postprocessing</a></li><li><a class="tocitem" href="../../examples/helmholtz/">Helmholtz equation</a></li><li><a class="tocitem" href="../../examples/incompressible_elasticity/">Incompressible Elasticity</a></li><li><a class="tocitem" href="../../examples/hyperelasticity/">Hyperelasticity</a></li><li><a class="tocitem" href="../../examples/threaded_assembly/">Threaded Assembly</a></li><li><a class="tocitem" href="../../examples/plasticity/">von Mises plasticity</a></li><li><a class="tocitem" href="../../examples/transient_heat_equation/">Time Dependent Problems</a></li><li><a class="tocitem" href="../../examples/landau/">Ginzburg-Landau model energy minimization</a></li><li><a class="tocitem" href="../../examples/linear_shell/">Linear shell</a></li><li><a class="tocitem" href="../../examples/quasi_incompressible_hyperelasticity/">Nearly Incompressible Hyperelasticity</a></li><li><a class="tocitem" href="../../examples/ns_vs_diffeq/">Incompressible Navier-Stokes Equations via DifferentialEquations.jl</a></li><li><a class="tocitem" href="../../examples/computational_homogenization/">Computational homogenization</a></li><li><a class="tocitem" href="../../examples/stokes-flow/">Stokes flow</a></li><li><a class="tocitem" href="../../examples/topology_optimization/">Topology optimization</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../../reference/quadrature/">Quadrature</a></li><li><a class="tocitem" href="../../reference/interpolations/">Interpolation</a></li><li><a class="tocitem" href="../../reference/fevalues/">FEValues</a></li><li><a class="tocitem" href="../../reference/dofhandler/">Degrees of Freedom</a></li><li><a class="tocitem" href="../../reference/assembly/">Assembly</a></li><li><a class="tocitem" href="../../reference/boundary_conditions/">Boundary Conditions</a></li><li><a class="tocitem" href="../../reference/grid/">Grid &amp; AbstractGrid</a></li><li><a class="tocitem" href="../../reference/export/">Postprocessing</a></li><li><a class="tocitem" href="../../reference/utils/">Development utility functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Export</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Export</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Ferrite-FEM/Ferrite.jl" title="View the repository on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/master/docs/src/manual/export.md" title="Edit source on GitHub"><span class="docs-icon fas"></span></a><a class="docs-settings-button docs-navbar-link fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button docs-navbar-link fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Export"><a class="docs-heading-anchor" href="#Export">Export</a><a id="Export-1"></a><a class="docs-heading-anchor-permalink" href="#Export" title="Permalink"></a></h1><p>When the problem is solved, and the solution vector <code>u</code> is known we typically want to visualize it. The simplest way to do this is to write the solution to a VTK-file, which can be viewed in e.g. <a href="https://www.paraview.org/"><code>Paraview</code></a>. To write VTK-files, Ferrite uses, and extends, functions from the <a href="https://github.com/jipolanco/WriteVTK.jl"><code>WriteVTK.jl</code></a> package to simplify the exporting.</p><p>First we need to create a file, based on the grid. This is done with the <code>vtk_grid</code> function:</p><pre><code class="language-julia hljs">vtk = vtk_grid(&quot;my-solution&quot;, grid)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">VTK file &#39;my-solution.vtu&#39; (UnstructuredGrid file, open)</code></pre><p>Next we have to add data to the file. We may add different kinds of data; point data using <code>vtk_point_data</code> or cell data using <code>vtk_cell_data</code>. Point data is data for each nodal coordinate in the grid, for example our solution vector. Point data can be either scalars or vectors. Cell data is – as the name suggests – data for each cell. This can be for example the stress. As an example, lets add a solution vector <code>u</code> as point data, and a vector with stress for each cell, <code>σ</code>, as cell data:</p><pre><code class="language-julia hljs">vtk_point_data(vtk, u, &quot;my-point-data&quot;)
vtk_cell_data(vtk,  σ, &quot;my-cell-data&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">&lt;DataArray type=&quot;Float64&quot; Name=&quot;my-cell-data&quot; NumberOfComponents=&quot;1&quot; format=&quot;appended&quot; offset=&quot;367&quot;/&gt;</code></pre><p>Finally, we need to save the file to disk, using <code>vtk_save</code></p><pre><code class="language-julia hljs">vtk_save(vtk)</code></pre><p>Alternatively, all of the above can be done using a <code>do</code> block:</p><pre><code class="language-julia hljs">vtk_grid(&quot;my-solution&quot;, grid) do vtk
    vtk_point_data(vtk, u, &quot;my-point-data&quot;)
    vtk_cell_data(vtk, σ, &quot;my-cell-data&quot;)
end</code></pre><p>For other functionality, and more information refer to the <a href="https://github.com/jipolanco/WriteVTK.jl/blob/master/README.md"><code>WriteVTK.jl</code> README</a>. In particular, for exporting the solution at multiple time steps, the <a href="https://github.com/jipolanco/WriteVTK.jl#paraview-data-pvd-file-format">section on PVD files</a> is useful.</p><h2 id="Exporting-with-DofHandler"><a class="docs-heading-anchor" href="#Exporting-with-DofHandler">Exporting with <code>DofHandler</code></a><a id="Exporting-with-DofHandler-1"></a><a class="docs-heading-anchor-permalink" href="#Exporting-with-DofHandler" title="Permalink"></a></h2><p>There is an even more convenient way to export a solution vector <code>u</code> – using the <code>DofHandler</code>. The <code>DofHandler</code> already contains all of the information needed, such as the names of our fields and if they are scalar or vector fields. But most importantly the <code>DofHandler</code> knows about the numbering and distribution of degrees of freedom, and thus knows how to &quot;distribute&quot; the solution vector on the grid. For example, lets say we have a <code>DofHandler</code> <code>dh</code> and a solution vector <code>u</code>:</p><pre><code class="language-julia hljs">vtk = vtk_grid(&quot;my-solution&quot;, dh)
vtk_point_data(vtk, dh, u)
vtk_save(vtk)</code></pre><p>or with a <code>do</code>-block:</p><pre><code class="language-julia hljs">vtk_grid(&quot;my-solution&quot;, dh) do vtk
    vtk_point_data(vtk, dh, u)
    vtk_cell_data(vtk, σ, &quot;my-cell-data&quot;)
end</code></pre><p>When <code>vtk_point_data</code> is used with a <code>DofHandler</code> all of the fields will be written to the VTK file, and the names will be determined by the fieldname symbol that was used when the field was added to the <code>DofHandler</code>.</p><h2 id="Exporting-Boundary-Conditions"><a class="docs-heading-anchor" href="#Exporting-Boundary-Conditions">Exporting Boundary Conditions</a><a id="Exporting-Boundary-Conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Exporting-Boundary-Conditions" title="Permalink"></a></h2><p>There is also a <code>vtk_point_data</code> which accepts a <code>ConstraintHandler</code>. This method is useful to verify that the boundary conditions are applied where they are supposed to. For a <code>ConstraintHandler</code> <code>ch</code> we can export the boundary conditions as</p><pre><code class="language-julia hljs">vtk_grid(&quot;boundary-conditions&quot;, grid) do vtk
    vtk_point_data(vtk, ch)
end</code></pre><p>This will export zero-valued fields with ones on the parts where the boundary conditions are active.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../grid/">« Grid</a><a class="docs-footer-nextpage" href="../../overview/">Documentation of examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.28.0-DEV on <span class="colophon-date" title="Tuesday 28 February 2023 13:49">Tuesday 28 February 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
