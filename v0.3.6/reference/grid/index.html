<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Grid &amp; AbstractGrid · Ferrite.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Ferrite.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../manual/fe_intro/">Introduction to FEM</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/degrees_of_freedom/">Degrees of Freedom</a></li><li><a class="tocitem" href="../../manual/assembly/">Assembly</a></li><li><a class="tocitem" href="../../manual/boundary_conditions/">Boundary Conditions</a></li><li><a class="tocitem" href="../../manual/constraints/">Constraints</a></li><li><a class="tocitem" href="../../manual/grid/">Grid</a></li><li><a class="tocitem" href="../../manual/export/">Export</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/heat_equation/">Heat Equation</a></li><li><a class="tocitem" href="../../examples/postprocessing/">Postprocessing</a></li><li><a class="tocitem" href="../../examples/helmholtz/">Helmholtz equation</a></li><li><a class="tocitem" href="../../examples/incompressible_elasticity/">Incompressible Elasticity</a></li><li><a class="tocitem" href="../../examples/hyperelasticity/">Hyperelasticity</a></li><li><a class="tocitem" href="../../examples/threaded_assembly/">Threaded Assembly</a></li><li><a class="tocitem" href="../../examples/plasticity/">von Mises plasticity</a></li><li><a class="tocitem" href="../../examples/transient_heat_equation/">Time Dependent Problems</a></li><li><a class="tocitem" href="../../examples/landau/">Ginzburg-Landau model energy minimization</a></li><li><a class="tocitem" href="../../examples/linear_shell/">Linear shell</a></li><li><a class="tocitem" href="../../examples/quasi_incompressible_hyperelasticity/">Nearly Incompressible Hyperelasticity</a></li><li><a class="tocitem" href="../../examples/ns_vs_diffeq/">Incompressible Navier-Stokes Equations via DifferentialEquations.jl</a></li><li><a class="tocitem" href="../../examples/computational_homogenization/">Computational homogenization</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../quadrature/">Quadrature</a></li><li><a class="tocitem" href="../interpolations/">Interpolation</a></li><li><a class="tocitem" href="../fevalues/">FEValues</a></li><li><a class="tocitem" href="../dofhandler/">Degrees of Freedom</a></li><li><a class="tocitem" href="../assembly/">Assembly</a></li><li><a class="tocitem" href="../boundary_conditions/">Boundary Conditions</a></li><li class="is-active"><a class="tocitem" href>Grid &amp; AbstractGrid</a><ul class="internal"><li><a class="tocitem" href="#Grid"><span>Grid</span></a></li><li><a class="tocitem" href="#AbstractGrid"><span>AbstractGrid</span></a></li></ul></li><li><a class="tocitem" href="../export/">Postprocessing</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API Reference</a></li><li class="is-active"><a href>Grid &amp; AbstractGrid</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Grid &amp; AbstractGrid</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/master/docs/src/reference/grid.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Grid-and-AbstractGrid"><a class="docs-heading-anchor" href="#Grid-and-AbstractGrid">Grid &amp; AbstractGrid</a><a id="Grid-and-AbstractGrid-1"></a><a class="docs-heading-anchor-permalink" href="#Grid-and-AbstractGrid" title="Permalink"></a></h1><h2 id="Grid"><a class="docs-heading-anchor" href="#Grid">Grid</a><a id="Grid-1"></a><a class="docs-heading-anchor-permalink" href="#Grid" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Ferrite.Node" href="#Ferrite.Node"><code>Ferrite.Node</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Node{dim, T}</code></pre><p>A <code>Node</code> is a point in space.</p><p><strong>Fields</strong></p><ul><li><code>x::Vec{dim,T}</code>: stores the coordinates</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L4-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.Cell" href="#Ferrite.Cell"><code>Ferrite.Cell</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Cell{dim,N,M} &lt;: AbstractCell{dim,N,M}</code></pre><p>A <code>Cell</code> is a sub-domain defined by a collection of <code>Node</code>s as it&#39;s vertices. However, a <code>cell</code> is not defined by the nodes but rather by the global node ids. The parameter <code>dim</code> refers here to the geometrical/ambient dimension, i.e. the dimension of the <code>nodes</code> in the grid and <strong>not</strong> the topological dimension of the cell. A <code>Cell</code> has <code>N</code> nodes and <code>M</code> faces.</p><p><strong>Fields</strong></p><ul><li><code>nodes::Ntuple{N,Int}</code>: N-tuple that stores the node ids. The ordering defines a cell&#39;s and its subentities&#39; orientations.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L20-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.CellIndex" href="#Ferrite.CellIndex"><code>Ferrite.CellIndex</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A <code>CellIndex</code> wraps an Int and corresponds to a cell with that number in the mesh</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L56-L58">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.VertexIndex" href="#Ferrite.VertexIndex"><code>Ferrite.VertexIndex</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A <code>VertexIndex</code> wraps an (Int, Int) and defines a local vertex by pointing to a (cell, vert).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L77-L79">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.EdgeIndex" href="#Ferrite.EdgeIndex"><code>Ferrite.EdgeIndex</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A <code>EdgeIndex</code> wraps an (Int, Int) and defines a local edge by pointing to a (cell, edge).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L70-L72">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.FaceIndex" href="#Ferrite.FaceIndex"><code>Ferrite.FaceIndex</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A <code>FaceIndex</code> wraps an (Int, Int) and defines a local face by pointing to a (cell, face).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L63-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.Grid" href="#Ferrite.Grid"><code>Ferrite.Grid</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Grid{dim, C&lt;:AbstractCell, T&lt;:Real} &lt;: AbstractGrid}</code></pre><p>A <code>Grid</code> is a collection of <code>Cells</code> and <code>Node</code>s which covers the computational domain, together with Sets of cells, nodes and faces. There are multiple helper structures to apply boundary conditions or define subdomains. They are gathered in the <code>cellsets</code>, <code>nodesets</code>, <code>facesets</code>, <code>edgesets</code> and <code>vertexsets</code>. </p><p><strong>Fields</strong></p><ul><li><code>cells::Vector{C}</code>: stores all cells of the grid</li><li><code>nodes::Vector{Node{dim,T}}</code>: stores the <code>dim</code> dimensional nodes of the grid</li><li><code>cellsets::Dict{String,Set{Int}}</code>: maps a <code>String</code> key to a <code>Set</code> of cell ids</li><li><code>nodesets::Dict{String,Set{Int}}</code>: maps a <code>String</code> key to a <code>Set</code> of global node ids</li><li><code>facesets::Dict{String,Set{FaceIndex}}</code>: maps a <code>String</code> to a <code>Set</code> of <code>Set{FaceIndex} (global_cell_id, local_face_id)</code></li><li><code>edgesets::Dict{String,Set{EdgeIndex}}</code>: maps a <code>String</code> to a <code>Set</code> of <code>Set{EdgeIndex} (global_cell_id, local_edge_id</code> </li><li><code>vertexsets::Dict{String,Set{VertexIndex}}</code>: maps a <code>String</code> key to a <code>Set</code> of local vertex ids</li><li><code>boundary_matrix::SparseMatrixCSC{Bool,Int}</code>: optional, only needed by <code>onboundary</code> to check if a cell is on the boundary, see, e.g. Helmholtz example</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L295-L311">source</a></section></article><h3 id="Utility-Functions"><a class="docs-heading-anchor" href="#Utility-Functions">Utility Functions</a><a id="Utility-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Utility-Functions" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getcells" href="#Ferrite.getcells"><code>Ferrite.getcells</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getcells(grid::AbstractGrid) 
getcells(grid::AbstractGrid, v::Union{Int,Vector{Int}} 
getcells(grid::AbstractGrid, setname::String)</code></pre><p>Returns either all <code>cells::Collection{C&lt;:AbstractCell}</code> of a <code>&lt;:AbstractGrid</code> or a subset based on an <code>Int</code>, <code>Vector{Int}</code> or <code>String</code>. Whereas the last option tries to call a <code>cellset</code> of the <code>grid</code>. <code>Collection</code> can be any indexable type, for <code>Grid</code> it is <code>Vector{C&lt;:AbstractCell}</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L399-L406">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getncells" href="#Ferrite.getncells"><code>Ferrite.getncells</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns the number of cells in the <code>&lt;:AbstractGrid</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L410">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getnodes" href="#Ferrite.getnodes"><code>Ferrite.getnodes</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getnodes(grid::AbstractGrid) 
getnodes(grid::AbstractGrid, v::Union{Int,Vector{Int}}
getnodes(grid::AbstractGrid, setname::String)</code></pre><p>Returns either all <code>nodes::Collection{N}</code> of a <code>&lt;:AbstractGrid</code> or a subset based on an <code>Int</code>, <code>Vector{Int}</code> or <code>String</code>. The last option tries to call a <code>nodeset</code> of the <code>&lt;:AbstractGrid</code>. <code>Collection{N}</code> refers to some indexable collection where each element corresponds to a Node.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L416-L424">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getnnodes" href="#Ferrite.getnnodes"><code>Ferrite.getnnodes</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns the number of nodes in the grid.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L428">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.nnodes_per_cell" href="#Ferrite.nnodes_per_cell"><code>Ferrite.nnodes_per_cell</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns the number of nodes of the <code>i</code>-th cell.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L430">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getcellset" href="#Ferrite.getcellset"><code>Ferrite.getcellset</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getcellset(grid::AbstractGrid, setname::String)</code></pre><p>Returns all cells as cellid in a <code>Set</code> of a given <code>setname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L433-L437">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getcellsets" href="#Ferrite.getcellsets"><code>Ferrite.getcellsets</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getcellsets(grid::AbstractGrid)</code></pre><p>Returns all cellsets of the <code>grid</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L439-L443">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getnodeset" href="#Ferrite.getnodeset"><code>Ferrite.getnodeset</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getnodeset(grid::AbstractGrid, setname::String)</code></pre><p>Returns all nodes as nodeid in a <code>Set</code> of a given <code>setname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L446-L450">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getnodesets" href="#Ferrite.getnodesets"><code>Ferrite.getnodesets</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getnodesets(grid::AbstractGrid)</code></pre><p>Returns all nodesets of the <code>grid</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L452-L456">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getfaceset" href="#Ferrite.getfaceset"><code>Ferrite.getfaceset</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getfaceset(grid::AbstractGrid, setname::String)</code></pre><p>Returns all faces as <code>FaceIndex</code> in a <code>Set</code> of a given <code>setname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L459-L463">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getfacesets" href="#Ferrite.getfacesets"><code>Ferrite.getfacesets</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getfacesets(grid::AbstractGrid)</code></pre><p>Returns all facesets of the <code>grid</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L465-L469">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getedgeset" href="#Ferrite.getedgeset"><code>Ferrite.getedgeset</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getedgeset(grid::AbstractGrid, setname::String)</code></pre><p>Returns all edges as <code>EdgeIndex</code> in a <code>Set</code> of a given <code>setname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L472-L476">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getedgesets" href="#Ferrite.getedgesets"><code>Ferrite.getedgesets</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getedgesets(grid::AbstractGrid)</code></pre><p>Returns all edge sets of the grid.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L478-L482">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getvertexset" href="#Ferrite.getvertexset"><code>Ferrite.getvertexset</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getedgeset(grid::AbstractGrid, setname::String)</code></pre><p>Returns all vertices as <code>VertexIndex</code> in a <code>Set</code> of a given <code>setname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L485-L489">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getvertexsets" href="#Ferrite.getvertexsets"><code>Ferrite.getvertexsets</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getvertexsets(grid::AbstractGrid)</code></pre><p>Returns all vertex sets of the grid.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L491-L495">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.compute_vertex_values" href="#Ferrite.compute_vertex_values"><code>Ferrite.compute_vertex_values</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function compute_vertex_values(grid::AbstractGrid, f::Function)
function compute_vertex_values(grid::AbstractGrid, v::Vector{Int}, f::Function)    
function compute_vertex_values(grid::AbstractGrid, set::String, f::Function)</code></pre><p>Given a <code>grid</code> and some function <code>f</code>, <code>compute_vertex_values</code> computes all nodal values,  i.e. values at the nodes,  of the function <code>f</code>.  The function implements two dispatches, where only a subset of the grid&#39;s node is used.</p><pre><code class="language-julia hljs">    compute_vertex_values(grid, x -&gt; sin(x[1]) + cos([2]))
    compute_vertex_values(grid, [9, 6, 3], x -&gt; sin(x[1]) + cos([2])) #compute function values at nodes with id 9,6,3
    compute_vertex_values(grid, &quot;right&quot;, x -&gt; sin(x[1]) + cos([2])) #compute function values at nodes belonging to nodeset right</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L500-L515">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.transform!" href="#Ferrite.transform!"><code>Ferrite.transform!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">transform!(grid::Abstractgrid, f::Function)</code></pre><p>Transform all nodes of the <code>grid</code> based on some transformation function <code>f</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L533-L537">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getcoordinates" href="#Ferrite.getcoordinates"><code>Ferrite.getcoordinates</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getcoordinates(grid::AbstractGrid, cell)</code></pre><p>Return a vector with the coordinates of the vertices of cell number <code>cell</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L679-L682">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getcoordinates!" href="#Ferrite.getcoordinates!"><code>Ferrite.getcoordinates!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getcoordinates!(x::Vector{Vec{dim,T}}, grid::AbstractGrid, cell::Int)</code></pre><p>Fills the vector <code>x</code> with the coordinates of a cell, defined by its cell id.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L666-L669">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.ExclusiveTopology" href="#Ferrite.ExclusiveTopology"><code>Ferrite.ExclusiveTopology</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ExclusiveTopology(cells::Vector{C}) where C &lt;: AbstractCell</code></pre><p><code>ExclusiveTopology</code> saves topological (connectivity) data of the grid. The constructor works with an <code>AbstractCell</code> vector for all cells that dispatch <code>vertices</code>, <code>faces</code> and in 3D <code>edges</code> as well as the utility functions <code>face_npoints</code> and <code>edge_npoints</code>. The struct saves the highest dimensional neighborhood, i.e. if something is connected by a face and an  edge only the face neighborhood is saved. The lower dimensional neighborhood is recomputed, if needed.</p><p><strong>Fields</strong></p><ul><li><code>vertex_to_cell::Dict{Int,Vector{Int}}</code>: global vertex id to all cells containing the vertex</li><li><code>cell_neighbor::Vector{EntityNeighborhood{CellIndex}}</code>: cellid to all connected cells</li><li><code>face_neighbor::SparseMatrixCSC{EntityNeighborhood,Int}</code>: <code>face_neighbor[cellid,local_face_id]</code> -&gt; neighboring face</li><li><code>vertex_neighbor::SparseMatrixCSC{EntityNeighborhood,Int}</code>: <code>vertex_neighbor[cellid,local_vertex_id]</code> -&gt; neighboring vertex</li><li><code>edge_neighbor::SparseMatrixCSC{EntityNeighborhood,Int}</code>: <code>edge_neighbor[cellid_local_vertex_id]</code> -&gt; neighboring edge</li><li><code>vertex_vertex_neighbor::Dict{Int,EntityNeighborhood{VertexIndex}}</code>: global vertex id -&gt; all connected vertices by edge or face</li><li><code>face_skeleton::Vector{FaceIndex}</code>: list of unique faces in the grid </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L132-L148">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.getneighborhood" href="#Ferrite.getneighborhood"><code>Ferrite.getneighborhood</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getneighborhood(top::ExclusiveTopology, grid::Grid{dim,C,T}, cellidx::CellIndex, include_self=false)
getneighborhood(top::ExclusiveTopology, grid::Grid{dim,C,T}, faceidx::FaceIndex, include_self=false)
getneighborhood(top::ExclusiveTopology, grid::Grid{dim,C,T}, vertexidx::VertexIndex, include_self=false)
getneighborhood(top::ExclusiveTopology, grid::Grid{dim,C,T}, edgeidx::EdgeIndex, include_self=false)</code></pre><p>Returns all directly connected entities of the same type, i.e. calling the function with a <code>VertexIndex</code> will return a list of directly connected vertices (connected via face/edge). If <code>include_self</code> is true, the given <code>*Index</code> is included  in the returned list.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This feature is highly experimental and very likely subjected to interface changes in the future.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L339-L351">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.faceskeleton" href="#Ferrite.faceskeleton"><code>Ferrite.faceskeleton</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">faceskeleton(grid) -&gt; Vector{FaceIndex}</code></pre><p>Returns an iterateable face skeleton. The skeleton consists of <code>FaceIndex</code> that can be used to <code>reinit</code>  <code>FaceValues</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L388-L392">source</a></section></article><h3 id="Grid-Sets-Utility"><a class="docs-heading-anchor" href="#Grid-Sets-Utility">Grid Sets Utility</a><a id="Grid-Sets-Utility-1"></a><a class="docs-heading-anchor-permalink" href="#Grid-Sets-Utility" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Ferrite.addcellset!" href="#Ferrite.addcellset!"><code>Ferrite.addcellset!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">addcellset!(grid::AbstractGrid, name::String, cellid::Union{Set{Int}, Vector{Int}})
addcellset!(grid::AbstractGrid, name::String, f::function; all::Bool=true)</code></pre><p>Adds a cellset to the grid with key <code>name</code>. Cellsets are typically used to define subdomains of the problem, e.g. two materials in the computational domain. The <code>MixedDofHandler</code> can construct different fields which live not on the whole domain, but rather on a cellset. </p><pre><code class="language-julia hljs">addcellset!(grid, &quot;left&quot;, Set((1,3))) #add cells with id 1 and 3 to cellset left
addcellset!(grid, &quot;right&quot;, x -&gt; norm(x[1]) &lt; 2.0 ) #add cell to cellset right, if x[1] of each cell&#39;s node is smaller than 2.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L552-L564">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.addfaceset!" href="#Ferrite.addfaceset!"><code>Ferrite.addfaceset!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">addfaceset!(grid::AbstractGrid, name::String, faceid::Union{Set{FaceIndex},Vector{FaceIndex}})
addfaceset!(grid::AbstractGrid, name::String, f::Function; all::Bool=true)</code></pre><p>Adds a faceset to the grid with key <code>name</code>. A faceset maps a <code>String</code> key to a <code>Set</code> of tuples corresponding to <code>(global_cell_id, local_face_id)</code>. Facesets are used to initialize <code>Dirichlet</code> structs, that are needed to specify the boundary for the <code>ConstraintHandler</code>.</p><pre><code class="language-julia hljs">addfaceset!(gird, &quot;right&quot;, Set(((2,2),(4,2))) #see grid manual example for reference
addfaceset!(grid, &quot;clamped&quot;, x -&gt; norm(x[1]) ≈ 0.0) #see incompressible elasticity example for reference</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L590-L602">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Ferrite.addnodeset!" href="#Ferrite.addnodeset!"><code>Ferrite.addnodeset!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">addnodeset!(grid::AbstractGrid, name::String, nodeid::Union{Vector{Int},Set{Int}})
addnodeset!(grid::AbstractGrid, name::String, f::Function)</code></pre><p>Adds a <code>nodeset::Dict{String, Set{Int}}</code> to the <code>grid</code> with key <code>name</code>. Has the same interface as <code>addcellset</code>.  However, instead of mapping a cell id to the <code>String</code> key, a set of node ids is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/grid.jl#L641-L647">source</a></section></article><h3 id="Multithreaded-Assembly"><a class="docs-heading-anchor" href="#Multithreaded-Assembly">Multithreaded Assembly</a><a id="Multithreaded-Assembly-1"></a><a class="docs-heading-anchor-permalink" href="#Multithreaded-Assembly" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Ferrite.create_coloring" href="#Ferrite.create_coloring"><code>Ferrite.create_coloring</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">create_coloring(g::Grid, cellset::Set{Int}=Set(1:getncells(g)); alg::ColoringAlgorithm)</code></pre><p>Create a coloring of the cells in grid <code>g</code> such that no neighboring cells have the same color. If only a subset of cells should be colored, the cells to color can be specified by <code>cellset</code>.</p><p>Returns a vector of vectors with cell indexes, e.g.:</p><pre><code class="language-julia hljs">ret = [
   [1, 3, 5, 10, ...], # cells for color 1
   [2, 4, 6, 12, ...], # cells for color 2
]</code></pre><p>Two different algorithms are available, specified with the <code>alg</code> keyword argument:</p><ul><li><code>alg = ColoringAlgorithm.WorkStream</code> (default): Three step algorithm from <a href="https://www.math.colostate.edu/%7Ebangerth/publications/2013-pattern.pdf"><em>WorkStream</em></a> , albeit with a greedy coloring in the second step. Generally results in more colors than <code>ColoringAlgorithm.Greedy</code>, however the cells are more equally distributed among the colors.</li><li><code>alg = ColoringAlgorithm.Greedy</code>: greedy algorithm that works well for structured quadrilateral grids such as e.g. quadrilateral grids from <code>generate_grid</code>.</li></ul><p>The resulting colors can be visualized using <a href="../export/#Ferrite.vtk_cell_data_colors"><code>vtk_cell_data_colors</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Cell to color mapping</header><div class="admonition-body"><p>In a previous version of Ferrite this function returned a dictionary mapping cell ID to color numbers as the first argument. If you need this mapping you can create it using the following construct:</p><pre><code class="language-julia hljs">colors = create_coloring(...)
cell_colormap = Dict{Int,Int}(
    cellid =&gt; color for (color, cellids) in enumerate(final_colors) for cellid in cellids
)</code></pre></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/182157ea8ef2baf6968146c08d0a31cde0177804/src/Grid/coloring.jl#L153-L188">source</a></section></article><h2 id="AbstractGrid"><a class="docs-heading-anchor" href="#AbstractGrid">AbstractGrid</a><a id="AbstractGrid-1"></a><a class="docs-heading-anchor-permalink" href="#AbstractGrid" title="Permalink"></a></h2><p>It can be very useful to use a grid type for a certain special case, e.g. mixed cell types, adaptivity, IGA, etc. In order to define your own <code>&lt;: AbstractGrid</code> you need to fulfill the <code>AbstractGrid</code> interface. In case that certain structures are preserved from the <code>Ferrite.Grid</code> type, you don&#39;t need to dispatch on your own type, but rather rely on the fallback <code>AbstractGrid</code> dispatch.</p><h3 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h3><p>As a starting point, we choose a minimal working example from the test suite:</p><pre><code class="language-julia hljs">struct SmallGrid{dim,N,C&lt;:Ferrite.AbstractCell} &lt;: Ferrite.AbstractGrid{dim}
    nodes_test::Vector{NTuple{dim,Float64}}
    cells_test::NTuple{N,C}
end</code></pre><p>Here, the names of the fields as well as their underlying datastructure changed compared to the <code>Grid</code> type. This would lead to the fact, that any usage with the utility functions and DoF management will not work. So, we need to feed into the interface how to handle this subtyped datastructure. We start with the utility functions that are associated with the cells of the grid:</p><pre><code class="language-julia hljs">Ferrite.getcells(grid::SmallGrid) = grid.cells_test
Ferrite.getcells(grid::SmallGrid, v::Union{Int, Vector{Int}}) = grid.cells_test[v]
Ferrite.getncells(grid::SmallGrid{dim,N}) where {dim,N} = N
Ferrite.getcelltype(grid::SmallGrid) = eltype(grid.cells_test)
Ferrite.getcelltype(grid::SmallGrid, i::Int) = typeof(grid.cells_test[i])</code></pre><p>Next, we define some helper functions that take care of the node handling.</p><pre><code class="language-julia hljs">Ferrite.getnodes(grid::SmallGrid) = grid.nodes_test
Ferrite.getnodes(grid::SmallGrid, v::Union{Int, Vector{Int}}) = grid.nodes_test[v]
Ferrite.getnnodes(grid::SmallGrid) = length(grid.nodes_test)
Ferrite.nnodes_per_cell(grid::SmallGrid, i::Int=1) = Ferrite.nnodes(grid.cells_test[i])
Ferrite.n_faces_per_cell(grid::SmallGrid) = nfaces(eltype(grid.cells_test))</code></pre><p>Finally, we define <code>getcoordinates</code>, which is an important function, if we want to assemble a problem. The transformation from the reference space to the physical one requires information about the coordinates in order to construct the Jacobian. The return of this part is later handled over to <code>reinit!</code>.</p><pre><code class="language-julia hljs">function Ferrite.getcoordinates!(x::Vector{Vec{dim,T}}, grid::SmallGrid, cell::Int) where {dim,T}
    for i in 1:length(x)
        x[i] = Vec{dim,T}(grid.nodes_test[grid.cells_test[cell].nodes[i]])
    end
end

function Ferrite.getcoordinates(grid::SmallGrid{dim}, cell::Int) where dim
    nodeidx = grid.cells_test[cell].nodes
    return [Vec{dim,Float64}(grid.nodes_test[i]) for i in nodeidx]::Vector{Vec{dim,Float64}}
end</code></pre><p>Now, you would be able to assemble the heat equation example over the new custom <code>SmallGrid</code> type. Note that this particular subtype isn&#39;t able to handle boundary entity sets and so, you can&#39;t describe boundaries with it. In order to use boundaries, e.g. for Dirichlet constraints in the ConstraintHandler, you would need to dispatch the <code>AbstractGrid</code> sets utility functions on <code>SmallGrid</code>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../boundary_conditions/">« Boundary Conditions</a><a class="docs-footer-nextpage" href="../export/">Postprocessing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.19 on <span class="colophon-date" title="Thursday 30 June 2022 13:08">Thursday 30 June 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
